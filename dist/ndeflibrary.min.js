/*! lib-ndeflibrary - v1.0.0 - 2017-12-17 - Sebastian HÃ¶barth / Andreas Jakl */
!function(a){function b(a){"use strict";a.NdefLibrary=function(a){return a=a||{},this}}function c(a){"use strict";a.NdefLibrary}function d(a){"use strict";var b=a.NdefLibrary,c=b.NdefAndroidAppRecord=function(a){if(this.packageName="",1==arguments.length){if(b.NdefRecord.call(this,arguments[0]),!b.NdefAndroidAppRecord.isRecordType(this))throw"NdefException(NdefExceptionMessages.ExInvalidCopy)"}else b.NdefRecord.call(this,b.NdefRecord.TypeNameFormatType.ExternalRtd,b.NdefAndroidAppRecord.AndroidAppRecordType)};b.NdefAndroidAppRecord.AndroidAppRecordType="android.com:pkg".getBytes(),c.prototype=new b.NdefRecord,c.prototype.constructor=b.NdefAndroidAppRecord,b.NdefAndroidAppRecord.isRecordType=function(a){return null!=a.getType()&&0!=a.getType().length&&(a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.ExternalRtd&&p(a.getType(),b.NdefAndroidAppRecord.AndroidAppRecordType))},c.prototype.setPackageName=function(a){if(null==a)return void this.setPayload(null);var b=encodeURI(a),c=b.getBytes();this.setPayload(c)},c.prototype.getPackageName=function(a){return null==this.getPayload()||0==this.getPayload().length?"":decodeURI(q(this.getPayload()))}}function e(a){"use strict";var b=a.NdefLibrary,c=b.NdefSocialRecord=function(a){this.socialUserName="",this.socialType=b.NdefSocialRecord.NfcSocialType.Twitter,1==arguments.length?b.NdefUriRecord.call(this,arguments[0]):b.NdefUriRecord.call(this)};c.prototype=new b.NdefUriRecord,c.prototype.constructor=b.NdefSocialRecord,b.NdefSocialRecord.NfcSocialType={Twitter:0,LinkedIn:1,Facebook:2,Xing:3,VKontakte:4,FoursquareWeb:5,FoursquareApp:6,Skype:7,GooglePlus:8},b.NdefSocialRecord.SocialTagTypeUris=["http://twitter.com/{0}","http://linkedin.com/in/{0}","http://facebook.com/{0}","http://xing.com/profile/{0}","http://vkontakte.ru/{0}","http://m.foursquare.com/v/{0}","foursquare://venues/{0}","skype:{0}?call","https://plus.google.com/{0}"],c.prototype.updatePayload=function(){var a=b.NdefSocialRecord.SocialTagTypeUris[this.socialType],c=String.format(a,this.socialUserName);this.setUri(c)},c.checkIfValid=function(){if(!b.NdefUriRecord.prototype.checkIfValid())return!1;if(null==this.socialUserName||0==this.socialUserName.length)throw new"NdefException(NdefExceptionMessages.ExTelNumberEmpty)";return!0},c.prototype.getSocialUserName=function(){return this.socialUserName},c.prototype.setSocialUserName=function(a){this.socialUserName=a,this.updatePayload()},c.prototype.getSocialType=function(){return this.socialType},c.prototype.setSocialType=function(a){this.socialType=a,this.updatePayload()}}function f(a){"use strict";var b=a.NdefLibrary,c=b.NdefGeoRecord=function(a){this.Longitude="",this.Latitude="",this._geoType="",1==arguments.length?(b.NdefUriRecord.call(this,arguments[0]),this.updatePayload()):b.NdefUriRecord.call(this)};c.prototype=new b.NdefUriRecord,c.prototype.constructor=b.NdefGeoRecord,b.NdefGeoRecord.NfcGeoType={GeoUri:0,BingMaps:1,NokiaMapsUri:2,WebRedirect:3,MsDriveTo:4,MsWalkTo:5},b.NdefSocialRecord.GeoTagTypeUris=["geo:{0},{1}","bingmaps:?cp={0}~{1}","http://m.ovi.me/?c={0},{1}","http://NfcInteractor.com/m?c={0},{1}","ms-drive-to:?destination.latitude={0}&destination.longitude={1}","ms-walk-to:?destination.latitude={0}&destination.longitude={1}"],c.prototype.updatePayload=function(){if(null!=this.Latitude&&0!=this.Latitude.length||null!=this.Longitude&&0!=this.Longitude.length){var a=b.NdefSocialRecord.GeoTagTypeUris[this.getGeoType()],c=String.format(a,this.Latitude,this.Longitude);this.setUri(c)}},c.prototype.getLatitude=function(){return this.Latitude},c.prototype.setLatitude=function(a){this.Latitude=a,this.updatePayload()},c.prototype.getLongitude=function(){return this.Longitude},c.prototype.setLongitude=function(a){this.Longitude=a,this.updatePayload()},c.prototype.getGeoType=function(){return this._geoType},c.prototype.setGeoType=function(a){this._geoType=a,this.updatePayload()}}function g(a){"use strict";var b=a.NdefLibrary,c=b.NdefTelRecord=function(a){this.telNumber="",1==arguments.length?(b.NdefUriRecord.call(this,arguments[0]),this.parseUriToData(this.getUri())):b.NdefUriRecord.call(this)};b.NdefTelRecord.TelScheme="tel:",c.prototype=new b.NdefUriRecord,c.prototype.constructor=b.NdefTelRecord,b.NdefTelRecord.isRecordType=function(a){if(null==a.getType()||0==a.getType().length)return!1;if(a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.NfcRtd&&null!=a.getPayload()&&p(a.getType(),b.NdefUriRecord.UriType)){return new b.NdefUriRecord(a).getUri().startsWith(b.NdefTelRecord.TelScheme)}return!1},c.checkIfValid=function(){if(!b.NdefUriRecord.prototype.checkIfValid())return!1;if(null==this.telNumber||0==this.telNumber.length)throw new"NdefException(NdefExceptionMessages.ExTelNumberEmpty)";return!0},c.prototype.getTelNumber=function(){return this.telNumber},c.prototype.setTelNumber=function(a){this.telNumber=a,this.updatePayload()},c.prototype.parseUriToData=function(a){var b=a.replace("tel:","");this.telNumber=b,this.updatePayload()},c.prototype.updatePayload=function(){null!=this.telNumber&&this.telNumber.length>0&&this.setUri(b.NdefTelRecord.TelScheme+this.telNumber)}}function h(a){"use strict";var b=a.NdefLibrary,c=b.NdefUriRecord=function(a){this.RawUri=new Array,this.Uri="",1==arguments.length?b.NdefRecord.call(this,arguments[0]):b.NdefRecord.call(this,b.NdefRecord.TypeNameFormatType.NfcRtd,b.NdefUriRecord.UriType)};b.NdefUriRecord.UriType="U".getBytes(),b.NdefUriRecord.Abbreviations=["","http://www.","https://www.","http://","https://","tel:","mailto:","ftp://anonymous:anonymous@","ftp://ftp.","ftps://","sftp://","smb://","nfs://","ftp://","dav://","news:","telnet://","imap:","rtsp://","urn:","pop:","sip:","sips:","tftp:","btspp://","btl2cap://","btgoep://","tcpobex://","irdaobex://","file://","urn:epc:id:","urn:epc:tag:","urn:epc:pat:","urn:epc:raw:","urn:epc:","urn:nfc:"],b.NdefUriRecord.isRecordType=function(a){return null!=a.getType()&&0!=a.getType().length&&(a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.NfcRtd&&p(a.getType(),b.NdefUriRecord.UriType))},c.prototype=new b.NdefRecord,c.prototype.constructor=b.NdefUriRecord,c.prototype.getRawUri=function(){if(null==this.getPayload()||0==this.getPayload().length)return null;0!=this.getPayload()[0]&&console.log("NdefExceptionMessages.ExRawUriNoAbbreviation");var a=new Array(this.getPayload().length-1),b=this.getPayload();return m(b,1,a,0,b.length-1),a},c.prototype.setRawUri=function(a){var b=new Array(a.length+1);b[0]=0,m(a,0,b,1,a.length),this.setPayload(b)},c.prototype.setUri=function(a){for(var c=a,d=0,e=1;e<b.NdefUriRecord.Abbreviations.length;e++)if(c.startsWith(b.NdefUriRecord.Abbreviations[e])){d=e;break}var f=(b.NdefUriRecord.Abbreviations[d].length,c.replace(b.NdefUriRecord.Abbreviations[d],"")),g=o(f),h=new Array(g+1);h[0]=d;var i=encodeURI(f),j=i.getBytes();m(j,0,h,1,j.length),this.setPayload(h)},c.prototype.getUri=function(a){var c=this.getPayload();if(null==c||0==c.length)return"";var d=c[0];d>=b.NdefUriRecord.Abbreviations.length&&(d=0);var e=new Array(c.length-1);return m(c,1,e,0,c.length-1),b.NdefUriRecord.Abbreviations[d].concat(decodeURI(q(e)))}}function i(a){"use strict";var b=a.NdefLibrary,c=b.NdefTextRecord=function(a){if(this.LanguageCode=null,this.text=null,1==arguments.length){if(b.NdefRecord.call(this,arguments[0]),!b.NdefTextRecord.isRecordType(this))throw"NdefException(NdefExceptionMessages.ExInvalidCopy)"}else b.NdefRecord.call(this,b.NdefRecord.TypeNameFormatType.NfcRtd,b.NdefTextRecord.TextType)};c.prototype=new b.NdefRecord,c.prototype.constructor=b.NdefTextRecord,b.NdefTextRecord.TextType="T".getBytes(),b.NdefTextRecord.TextEncodingType={Utf8:0,Utf16:1},b.NdefTextRecord.isRecordType=function(a){return null!=a.getType()&&0!=a.getType().length&&(a.getTypeNameFormat()==b.NdefRecord.TypeNameFormatType.NfcRtd&&p(a.getType(),b.NdefTextRecord.TextType))},c.prototype.setLanguageCode=function(a){this.assemblePayload(a,this.getTextEncoding(),this.getText())},c.prototype.getLanguageCode=function(){if(null==this.getPayload()||0==this.getPayload().length)return"en";var a=this.getPayload()[0],b=63&a,c=new Array(b);return m(this.getPayload(),1,c,0,b),decodeURI(q(c))},c.prototype.setText=function(a){this.assemblePayload(this.getLanguageCode(),this.getTextEncoding(),a)},c.prototype.getText=function(){if(null==this.getPayload()||0==this.getPayload().length)return"";var a=63&this.getPayload()[0],b=new Array;return m(this.getPayload(),1+a,b,0,this.getPayload().length-1-a),q(b)},c.prototype.setTextEncoding=function(a){this.assemblePayload(this.getLanguageCode(),a,this.getText())},c.prototype.getTextEncoding=function(){return null==this.getPayload()||0==this.getPayload().length?b.NdefTextRecord.TextEncodingType.Utf8:0!=(128&this.getPayload()[0])?b.NdefTextRecord.TextEncodingType.Utf16:b.NdefTextRecord.TextEncodingType.Utf8},c.prototype.assemblePayload=function(a,c,d){var e=a.getBytes(),f=d.getBytes(),g=1+e.length+f.length,h=new Array(g);h[0]=0,c==b.NdefTextRecord.TextEncodingType.Utf8?h[0]&=127:h[0]|=128,h[0]|=63&e.length,m(e,0,h,1,e.length),m(f,0,h,1+e.length,f.length),this.setPayload(h)}}function j(a){"use strict";var b=a.NdefLibrary,c=b.NdefRecord=function(a){if(this._typeNameFormat=b.NdefRecord.TypeNameFormatType.Empty,this._type=[],this._id=[],this._payload=[],2==arguments.length)this._typeNameFormat=arguments[0],null!=arguments[1]&&this.setType(arguments[1]);else if(1==arguments.length){var c=arguments[0];null!=c.getType()&&this.setType(c.getType()),null!=c.getId()&&this.setId(c.getId()),null!=c.getPayload()&&this.setPayload(c.getPayload()),this._typeNameFormat=c.getTypeNameFormat()}else this._typeNameFormat=b.NdefRecord.TypeNameFormatType.Empty};c.TypeNameFormatType={Empty:0,NfcRtd:1,Mime:2,Uri:3,ExternalRtd:4,Unknown:5,Unchanged:6,Reserved:7},c.prototype.getId=function(){return this._id},c.prototype.setId=function(a){if(null==a)return void(this._id=null);this._id=[],m(a,this._id,a.length)},c.prototype.getType=function(){return this._type},c.prototype.setType=function(a){if(null==a)return void(this._type=null);this._type=[],m(a,this._type,a.length)},c.prototype.getPayload=function(){return this._payload},c.prototype.setPayload=function(a){if(null==a)return void(this._payload=null);this._payload=[],m(a,this._payload,a.length)},c.prototype.getTypeNameFormat=function(){return this._typeNameFormat},c.prototype.setTypeNameFormat=function(a){this._typeNameFormat=a},c.prototype.checkSpecializedType=function(a){},c.prototype.checkIfValid=function(){if(this._typeNameFormat==b.NdefRecord.TypeNameFormatType.Unchanged||this._typeNameFormat==b.NdefRecord.TypeNameFormatType.Unknown){if(null!=this._type&&0!=this._type.length)throw"NdefExceptionMessages.ExRecordUnchangedTypeName"}else if(this._typeNameFormat!=b.NdefRecord.TypeNameFormatType.Empty&&(null==this._type||0==this._type.length))throw"NdefExceptionMessages.ExRecordNoType";if(this._typeNameFormat==b.NdefRecord.TypeNameFormatType.Unchanged&&null!=this._id&&0!=this._id.length)throw"NdefExceptionMessages.ExRecordUnchangedId";return!0}}function k(a){"use strict";var b=a.NdefLibrary,c=b.NdefMessage=function(){this._records=new Array,null!=arguments&&arguments.length>0&&m(arguments,this._records,arguments.length)};c.prototype.length=function(){return null==this._records?0:this._records.length},c.prototype.getRecords=function(){return this._records},c.prototype.push=function(a){null!=a&&this._records.push(a)},c.prototype.clear=function(){this._records=new Array},b.NdefMessage.fromByteArray=function(a){for(var c=new b.NdefMessage,d=!1,e=!1,f=new Array,g=new b.NdefRecord,h=0;h<a.length;){var i=0!=(128&a[h]),j=0!=(64&a[h]),k=0!=(32&a[h]),l=0!=(16&a[h]),o=0!=(8&a[h]),p=7&a[h];if(i&&d)throw"NdefExceptionMessages.ExMessageBeginLate";if(!i&&!d)throw"NdefExceptionMessages.ExMessageBeginMissing";if(i&&!d&&(d=!0),j&&e)throw"NdefExceptionMessages.ExMessageEndLate";if(j&&!e&&(e=!0),k&&p!=b.NdefRecord.TypeNameFormatType.Unchanged&&f.length>0)throw"NdefExceptionMessages.ExMessagePartialChunk";var q=1;if(q+=l?1:4,q+=o?1:0,h+q>=a.length)throw"NdefExceptionMessages.ExMessageUnexpectedEnd";var r=a[++h];if(p==b.NdefRecord.TypeNameFormatType.Unchanged&&0!=r)throw"NdefExceptionMessages.ExMessageInvalidChunkedType";var s;l?s=a[++h]:(s=a[++h]<<24,s|=a[++h]<<16,s|=a[++h]<<8,s|=a[++h]<<0);var t;t=o?a[++h]:0;if(h+(r+s+t)>=a.length)throw"NdefExceptionMessages.ExMessageUnexpectedEnd";if(p==b.NdefRecord.TypeNameFormatType.Unchanged&&0!=t)throw"NdefExceptionMessages.ExMessageInvalidChunkedId";if(p!=b.NdefRecord.TypeNameFormatType.Unchanged&&g.setTypeNameFormat(p),r>0){var u=new Array;m(a,++h,u,0,r),g.setType(u),h+=r-1}if(t>0){var v=new Array;m(a,++h,v,0,t),g.setId(v),h+=t-1}if(s>0){var w=new Array;m(a,++h,w,0,s),g.setPayload(w),k?n(f,w):p==b.NdefRecord.TypeNameFormatType.Unchanged?(n(f,w),g.setPayload(f)):g.setPayload(w),h+=s-1}if(k||(c.push(g),g=new b.NdefRecord),!k&&e)break;++h}if(!d&&!e)throw"NdefExceptionMessages.ExMessageNoBeginOrEnd";return c},c.prototype.toByteArray=function(){var a=this._records.length;if(0==a){return new b.NdefMessage(new b.NdefRecord).toByteArray()}for(var c=new Array,d=0;d<a;d++){var e=this._records[d],f=e.getTypeNameFormat();if(0==d&&(f|=128),d==a-1&&(f|=64),(null==e.getPayload()||e.getPayload().length<255)&&(f|=16),null!=e.getId()&&e.getId().length>0&&(f|=8),c.push(f),null!=e.getType()?c.push(e.getType().length):c.push(0),null==e.getPayload())c.push(0);else if(0!=(16&f))c.push(e.getPayload().length);else{var g=e.getPayload().length;c.push(g>>24),c.push(g>>16),c.push(g>>8),c.push(255&g)}null!=e.getId()&&0!=(8&f)&&c.push(e.getId().length),null!=e.getType()&&e.getType().length>0&&n(c,e.getType()),null!=e.getId()&&e.getId().length>0&&n(c,e.getId()),null!=e.getPayload()&&e.getPayload().length>0&&n(c,e.getPayload())}return c}}var l=!1,m=function(){var a,b,c=0,d=0,e=0;2===arguments.length?(a=arguments[0],b=arguments[1],e=a.length):3===arguments.length?(a=arguments[0],b=arguments[1],e=arguments[2]):5===arguments.length&&(a=arguments[0],c=arguments[1],b=arguments[2],d=arguments[3],e=arguments[4]);for(var f=c,g=d;f<e+c;f++,g++){if(null===b[g])throw"array index out of bounds exception";b[g]=a[f]}},n=function(a,b){var c,d,e,f=0,g=0;c=b,f=0,d=a,g=a.length,e=b.length;for(var h=f,i=g;h<e+f;h++,i++){if(null===d[i])throw"array index out of bounds exception";d[i]=c[h]}},o=function(a){var b=encodeURI(a);if(-1!=b.indexOf("%")){var c=b.split("%").length-1;0==c&&c++;c+=b.length-3*c}else c=b.length;return c},p=function(a,b){if(a===b)return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0};String.prototype.startsWith=function(a){return this.slice(0,a.length)==a},String.prototype.getBytes=function(){for(var a=[],b=0;b<this.length;++b)a.push(this.charCodeAt(b));return a},String.format=function(){for(var a=arguments[0],b=0;b<arguments.length-1;b++){var c=new RegExp("\\{"+b+"\\}","gm");a=a.replace(c,arguments[b+1])}return a};var q=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(parseInt(a[c]));return b};void 0===l&&(l=!0);var r=Function,s=(new r("return this")(),function(a){return b(a),c(a),j(a),k(a),h(a),d(a),g(a),e(a),f(a),i(a),a.NdefLibrary});"function"==typeof define&&define.amd?define(function(){return s({})}):s(this)}();