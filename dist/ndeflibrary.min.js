/*! ndef-lib - v0.1.0 - 2021-12-09 - Sebastian HÃ¶barth / Andreas Jakl / somq */

!function(){var e=!1,u=function(){var e,t,o=0,r=0,n=0;2===arguments.length?(e=arguments[0],t=arguments[1],n=e.length):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2]):5===arguments.length&&(e=arguments[0],o=arguments[1],t=arguments[2],r=arguments[3],n=arguments[4]);for(var i=o,a=r;i<n+o;i++,a++){if(null===t[a])throw"array index out of bounds exception";t[a]=e[i]}},g=function(e,t){for(var o=t,r=e,e=e.length,n=t.length,i=0,a=e;i<n+0;i++,a++){if(null===r[a])throw"array index out of bounds exception";r[a]=o[i]}},a=function(e){var t,e=encodeURI(e);return-1!=e.indexOf("%")?(0==(t=e.split("%").length-1)&&t++,t+=e.length-3*t):t=e.length,t},o=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var o=0;o<e.length;++o)if(e[o]!==t[o])return!1;return!0};String.prototype.startsWith=function(e){return this.slice(0,e.length)==e},String.prototype.getBytes=function(){for(var e=[],t=0;t<this.length;++t)e.push(this.charCodeAt(t));return e},String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)var o=new RegExp("\\{"+t+"\\}","gm"),e=e.replace(o,arguments[t+1]);return e};var d=function(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(parseInt(e[o]));return t};void 0===e&&(e=!0);new Function("return this")();function t(e){return function(e){"use strict";e.NdefLibrary=function(e){return this}}(e),function(e){"use strict";e.NdefLibrary}(e),function(e){"use strict";var t=e.NdefLibrary;(e=t.NdefRecord=function(e){this._typeNameFormat=t.NdefRecord.TypeNameFormatType.Empty,this._type=[],this._id=[],this._payload=[],2==arguments.length?(this._typeNameFormat=e,null!=arguments[1]&&this.setType(arguments[1])):1==arguments.length?(null!=(e=e).getType()&&this.setType(e.getType()),null!=e.getId()&&this.setId(e.getId()),null!=e.getPayload()&&this.setPayload(e.getPayload()),this._typeNameFormat=e.getTypeNameFormat()):this._typeNameFormat=t.NdefRecord.TypeNameFormatType.Empty}).TypeNameFormatType={Empty:0,NfcRtd:1,Mime:2,Uri:3,ExternalRtd:4,Unknown:5,Unchanged:6,Reserved:7},e.prototype.getId=function(){return this._id},e.prototype.setId=function(e){null!=e?(this._id=[],u(e,this._id,e.length)):this._id=null},e.prototype.getType=function(){return this._type},e.prototype.setType=function(e){null!=e?(this._type=[],u(e,this._type,e.length)):this._type=null},e.prototype.getPayload=function(){return this._payload},e.prototype.setPayload=function(e){null!=e?(this._payload=[],u(e,this._payload,e.length)):this._payload=null},e.prototype.getTypeNameFormat=function(){return this._typeNameFormat},e.prototype.setTypeNameFormat=function(e){this._typeNameFormat=e},e.prototype.checkSpecializedType=function(e){},e.prototype.checkIfValid=function(){if(this._typeNameFormat==t.NdefRecord.TypeNameFormatType.Unchanged||this._typeNameFormat==t.NdefRecord.TypeNameFormatType.Unknown){if(null!=this._type&&0!=this._type.length)throw"NdefExceptionMessages.ExRecordUnchangedTypeName"}else if(this._typeNameFormat!=t.NdefRecord.TypeNameFormatType.Empty&&(null==this._type||0==this._type.length))throw"NdefExceptionMessages.ExRecordNoType";if(this._typeNameFormat==t.NdefRecord.TypeNameFormatType.Unchanged&&null!=this._id&&0!=this._id.length)throw"NdefExceptionMessages.ExRecordUnchangedId";return!0}}(e),function(e){"use strict";var f=e.NdefLibrary;(e=f.NdefMessage=function(){this._records=new Array,null!=arguments&&0<arguments.length&&u(arguments,this._records,arguments.length)}).prototype.length=function(){return null==this._records?0:this._records.length},e.prototype.getRecords=function(){return this._records},e.prototype.push=function(e){null!=e&&this._records.push(e)},e.prototype.clear=function(){this._records=new Array},f.NdefMessage.fromByteArray=function(e){for(var t=new f.NdefMessage,o=!1,r=!1,n=new Array,i=new f.NdefRecord,a=0;a<e.length;){var d=0!=(128&e[a]),s=0!=(64&e[a]),p=0!=(32&e[a]),c=0!=(16&e[a]),l=0!=(8&e[a]),y=7&e[a];if(d&&o)throw"NdefExceptionMessages.ExMessageBeginLate";if(!d&&!o)throw"NdefExceptionMessages.ExMessageBeginMissing";if(d&&!o&&(o=!0),s&&r)throw"NdefExceptionMessages.ExMessageEndLate";if(s&&!r&&(r=!0),p&&y!=f.NdefRecord.TypeNameFormatType.Unchanged&&0<n.length)throw"NdefExceptionMessages.ExMessagePartialChunk";s=1;if(s+=c?1:4,a+(s+=l?1:0)>=e.length)throw"NdefExceptionMessages.ExMessageUnexpectedEnd";var h,s=e[++a];if(y==f.NdefRecord.TypeNameFormatType.Unchanged&&0!=s)throw"NdefExceptionMessages.ExMessageInvalidChunkedType";c?h=e[++a]:(h=e[++a]<<24,h|=e[++a]<<16,h|=e[++a]<<8,h|=e[++a]<<0);var c=l?e[++a]:0;if(a+(s+h+c)>=e.length)throw"NdefExceptionMessages.ExMessageUnexpectedEnd";if(y==f.NdefRecord.TypeNameFormatType.Unchanged&&0!=c)throw"NdefExceptionMessages.ExMessageInvalidChunkedId";if(y!=f.NdefRecord.TypeNameFormatType.Unchanged&&i.setTypeNameFormat(y),0<s&&(l=new Array,u(e,++a,l,0,s),i.setType(l),a+=s-1),0<c&&(s=new Array,u(e,++a,s,0,c),i.setId(s),a+=c-1),0<h&&(c=new Array,u(e,++a,c,0,h),i.setPayload(c),p?g(n,c):y==f.NdefRecord.TypeNameFormatType.Unchanged?(g(n,c),i.setPayload(n)):i.setPayload(c),a+=h-1),p||(t.push(i),i=new f.NdefRecord),!p&&r)break;++a}if(!o&&!r)throw"NdefExceptionMessages.ExMessageNoBeginOrEnd";return t},e.prototype.toByteArray=function(){var e=this._records.length;if(0==e)return new f.NdefMessage(new f.NdefRecord).toByteArray();for(var t=new Array,o=0;o<e;o++){var r,n=this._records[o],i=n.getTypeNameFormat();0==o&&(i|=128),o==e-1&&(i|=64),(null==n.getPayload()||n.getPayload().length<255)&&(i|=16),null!=n.getId()&&0<n.getId().length&&(i|=8),t.push(i),null!=n.getType()?t.push(n.getType().length):t.push(0),null==n.getPayload()?t.push(0):0!=(16&i)?t.push(n.getPayload().length):(r=n.getPayload().length,t.push(r>>24),t.push(r>>16),t.push(r>>8),t.push(255&r)),null!=n.getId()&&0!=(8&i)&&t.push(n.getId().length),null!=n.getType()&&0<n.getType().length&&g(t,n.getType()),null!=n.getId()&&0<n.getId().length&&g(t,n.getId()),null!=n.getPayload()&&0<n.getPayload().length&&g(t,n.getPayload())}return t}}(e),function(e){"use strict";var i=e.NdefLibrary,e=i.NdefUriRecord=function(e){this.RawUri=new Array,this.Uri="",1==arguments.length?i.NdefRecord.call(this,e):i.NdefRecord.call(this,i.NdefRecord.TypeNameFormatType.NfcRtd,i.NdefUriRecord.UriType)};i.NdefUriRecord.UriType="U".getBytes(),i.NdefUriRecord.Abbreviations=["","http://www.","https://www.","http://","https://","tel:","mailto:","ftp://anonymous:anonymous@","ftp://ftp.","ftps://","sftp://","smb://","nfs://","ftp://","dav://","news:","telnet://","imap:","rtsp://","urn:","pop:","sip:","sips:","tftp:","btspp://","btl2cap://","btgoep://","tcpobex://","irdaobex://","file://","urn:epc:id:","urn:epc:tag:","urn:epc:pat:","urn:epc:raw:","urn:epc:","urn:nfc:"],i.NdefUriRecord.isRecordType=function(e){return null!=e.getType()&&0!=e.getType().length&&(e.getTypeNameFormat()==i.NdefRecord.TypeNameFormatType.NfcRtd&&o(e.getType(),i.NdefUriRecord.UriType))},(e.prototype=new i.NdefRecord).constructor=i.NdefUriRecord,e.prototype.getRawUri=function(){if(null==this.getPayload()||0==this.getPayload().length)return null;0!=this.getPayload()[0]&&console.log("NdefExceptionMessages.ExRawUriNoAbbreviation");var e=new Array(this.getPayload().length-1),t=this.getPayload();return u(t,1,e,0,t.length-1),e},e.prototype.setRawUri=function(e){var t=new Array(e.length+1);t[0]=0,u(e,0,t,1,e.length),this.setPayload(t)},e.prototype.setUri=function(e){for(var t=e,o=0,r=1;r<i.NdefUriRecord.Abbreviations.length;r++)if(t.startsWith(i.NdefUriRecord.Abbreviations[r])){o=r;break}i.NdefUriRecord.Abbreviations[o].length;var n=t.replace(i.NdefUriRecord.Abbreviations[o],""),e=a(n),e=new Array(e+1);e[0]=o;n=encodeURI(n).getBytes();u(n,0,e,1,n.length),this.setPayload(e)},e.prototype.getUri=function(e){var t=this.getPayload();if(null==t||0==t.length)return"";var o=t[0];o>=i.NdefUriRecord.Abbreviations.length&&(o=0);var r=new Array(t.length-1);return u(t,1,r,0,t.length-1),i.NdefUriRecord.Abbreviations[o].concat(decodeURI(d(r)))}}(e),function(e){"use strict";var t=e.NdefLibrary,e=t.NdefAndroidAppRecord=function(e){if(this.packageName="",1==arguments.length){if(t.NdefRecord.call(this,e),!t.NdefAndroidAppRecord.isRecordType(this))throw"NdefException(NdefExceptionMessages.ExInvalidCopy)"}else t.NdefRecord.call(this,t.NdefRecord.TypeNameFormatType.ExternalRtd,t.NdefAndroidAppRecord.AndroidAppRecordType)};t.NdefAndroidAppRecord.AndroidAppRecordType="android.com:pkg".getBytes(),(e.prototype=new t.NdefRecord).constructor=t.NdefAndroidAppRecord,t.NdefAndroidAppRecord.isRecordType=function(e){return null!=e.getType()&&0!=e.getType().length&&(e.getTypeNameFormat()==t.NdefRecord.TypeNameFormatType.ExternalRtd&&o(e.getType(),t.NdefAndroidAppRecord.AndroidAppRecordType))},e.prototype.setPackageName=function(e){null!=e?(e=encodeURI(e).getBytes(),this.setPayload(e)):this.setPayload(null)},e.prototype.getPackageName=function(e){return null==this.getPayload()||0==this.getPayload().length?"":decodeURI(d(this.getPayload()))}}(e),function(e){"use strict";var t=e.NdefLibrary,e=t.NdefTelRecord=function(e){this.telNumber="",1==arguments.length?(t.NdefUriRecord.call(this,e),this.parseUriToData(this.getUri())):t.NdefUriRecord.call(this)};t.NdefTelRecord.TelScheme="tel:",(e.prototype=new t.NdefUriRecord).constructor=t.NdefTelRecord,t.NdefTelRecord.isRecordType=function(e){if(null==e.getType()||0==e.getType().length)return!1;if(e.getTypeNameFormat()==t.NdefRecord.TypeNameFormatType.NfcRtd&&null!=e.getPayload()&&o(e.getType(),t.NdefUriRecord.UriType))return new t.NdefUriRecord(e).getUri().startsWith(t.NdefTelRecord.TelScheme);return!1},e.checkIfValid=function(){if(!t.NdefUriRecord.prototype.checkIfValid())return!1;if(null==this.telNumber||0==this.telNumber.length)throw new"NdefException(NdefExceptionMessages.ExTelNumberEmpty)";return!0},e.prototype.getTelNumber=function(){return this.telNumber},e.prototype.setTelNumber=function(e){this.telNumber=e,this.updatePayload()},e.prototype.parseUriToData=function(e){e=e.replace("tel:","");this.telNumber=e,this.updatePayload()},e.prototype.updatePayload=function(){null!=this.telNumber&&0<this.telNumber.length&&this.setUri(t.NdefTelRecord.TelScheme+this.telNumber)}}(e),function(e){"use strict";var t=e.NdefLibrary;((e=t.NdefSocialRecord=function(e){this.socialUserName="",this.socialType=t.NdefSocialRecord.NfcSocialType.Twitter,1==arguments.length?t.NdefUriRecord.call(this,e):t.NdefUriRecord.call(this)}).prototype=new t.NdefUriRecord).constructor=t.NdefSocialRecord,t.NdefSocialRecord.NfcSocialType={Twitter:0,LinkedIn:1,Facebook:2,Xing:3,VKontakte:4,FoursquareWeb:5,FoursquareApp:6,Skype:7,GooglePlus:8},t.NdefSocialRecord.SocialTagTypeUris=["http://twitter.com/{0}","http://linkedin.com/in/{0}","http://facebook.com/{0}","http://xing.com/profile/{0}","http://vkontakte.ru/{0}","http://m.foursquare.com/v/{0}","foursquare://venues/{0}","skype:{0}?call","https://plus.google.com/{0}"],e.prototype.updatePayload=function(){var e=t.NdefSocialRecord.SocialTagTypeUris[this.socialType],e=String.format(e,this.socialUserName);this.setUri(e)},e.checkIfValid=function(){if(!t.NdefUriRecord.prototype.checkIfValid())return!1;if(null==this.socialUserName||0==this.socialUserName.length)throw new"NdefException(NdefExceptionMessages.ExTelNumberEmpty)";return!0},e.prototype.getSocialUserName=function(){return this.socialUserName},e.prototype.setSocialUserName=function(e){this.socialUserName=e,this.updatePayload()},e.prototype.getSocialType=function(){return this.socialType},e.prototype.setSocialType=function(e){this.socialType=e,this.updatePayload()}}(e),function(e){"use strict";var t=e.NdefLibrary;((e=t.NdefGeoRecord=function(e){this.Longitude="",this.Latitude="",this._geoType="",1==arguments.length?(t.NdefUriRecord.call(this,e),this.updatePayload()):t.NdefUriRecord.call(this)}).prototype=new t.NdefUriRecord).constructor=t.NdefGeoRecord,t.NdefGeoRecord.NfcGeoType={GeoUri:0,BingMaps:1,NokiaMapsUri:2,WebRedirect:3,MsDriveTo:4,MsWalkTo:5},t.NdefSocialRecord.GeoTagTypeUris=["geo:{0},{1}","bingmaps:?cp={0}~{1}","http://m.ovi.me/?c={0},{1}","http://NfcInteractor.com/m?c={0},{1}","ms-drive-to:?destination.latitude={0}&destination.longitude={1}","ms-walk-to:?destination.latitude={0}&destination.longitude={1}"],e.prototype.updatePayload=function(){var e;(null!=this.Latitude&&0!=this.Latitude.length||null!=this.Longitude&&0!=this.Longitude.length)&&(e=t.NdefSocialRecord.GeoTagTypeUris[this.getGeoType()],e=String.format(e,this.Latitude,this.Longitude),this.setUri(e))},e.prototype.getLatitude=function(){return this.Latitude},e.prototype.setLatitude=function(e){this.Latitude=e,this.updatePayload()},e.prototype.getLongitude=function(){return this.Longitude},e.prototype.setLongitude=function(e){this.Longitude=e,this.updatePayload()},e.prototype.getGeoType=function(){return this._geoType},e.prototype.setGeoType=function(e){this._geoType=e,this.updatePayload()}}(e),function(e){"use strict";var n=e.NdefLibrary;((e=n.NdefTextRecord=function(e){if(this.LanguageCode=null,this.text=null,1==arguments.length){if(n.NdefRecord.call(this,e),!n.NdefTextRecord.isRecordType(this))throw"NdefException(NdefExceptionMessages.ExInvalidCopy)"}else n.NdefRecord.call(this,n.NdefRecord.TypeNameFormatType.NfcRtd,n.NdefTextRecord.TextType)}).prototype=new n.NdefRecord).constructor=n.NdefTextRecord,n.NdefTextRecord.TextType="T".getBytes(),n.NdefTextRecord.TextEncodingType={Utf8:0,Utf16:1},n.NdefTextRecord.isRecordType=function(e){return null!=e.getType()&&0!=e.getType().length&&(e.getTypeNameFormat()==n.NdefRecord.TypeNameFormatType.NfcRtd&&o(e.getType(),n.NdefTextRecord.TextType))},e.prototype.setLanguageCode=function(e){this.assemblePayload(e,this.getTextEncoding(),this.getText())},e.prototype.getLanguageCode=function(){if(null==this.getPayload()||0==this.getPayload().length)return"en";var e=63&this.getPayload()[0],t=new Array(e);return u(this.getPayload(),1,t,0,e),decodeURI(d(t))},e.prototype.setText=function(e){this.assemblePayload(this.getLanguageCode(),this.getTextEncoding(),e)},e.prototype.getText=function(){if(null==this.getPayload()||0==this.getPayload().length)return"";var e=63&this.getPayload()[0],t=new Array;return u(this.getPayload(),1+e,t,0,this.getPayload().length-1-e),d(t)},e.prototype.setTextEncoding=function(e){this.assemblePayload(this.getLanguageCode(),e,this.getText())},e.prototype.getTextEncoding=function(){return null!=this.getPayload()&&0!=this.getPayload().length&&0!=(128&this.getPayload()[0])?n.NdefTextRecord.TextEncodingType.Utf16:n.NdefTextRecord.TextEncodingType.Utf8},e.prototype.assemblePayload=function(e,t,o){var r=e.getBytes(),e=o.getBytes(),o=1+r.length+e.length,o=new Array(o);o[0]=0,t==n.NdefTextRecord.TextEncodingType.Utf8?o[0]&=127:o[0]|=128,o[0]|=63&r.length,u(r,0,o,1,r.length),u(e,0,o,1+r.length,e.length),this.setPayload(o)}}(e),e.NdefLibrary}"function"==typeof define&&define.amd?define(function(){return t({})}):t(this)}();